{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\gitzip\\\\ReactwebHashcampus\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\gitzip\\\\ReactwebHashcampus\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:\\\\gitzip\\\\ReactwebHashcampus\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\gitzip\\\\ReactwebHashcampus\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\gitzip\\\\ReactwebHashcampus\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import axios from'axios';import{showErrMsg,showSuccessMsg}from'../../utils/notification/Notification';import{dispatchLogin}from'../../../redux/actions/authAction';import{useDispatch}from'react-redux';import{GoogleLogin}from'react-google-login';import FacebookLogin from'react-facebook-login';import'./Login.css';var initialState={email:'',password:'',err:'',success:''};function Login(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var email=user.email,password=user.password,err=user.err,success=user.success;var handleChangeInput=function handleChangeInput(e){var _objectSpread2;var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"err\",''),_defineProperty(_objectSpread2,\"success\",''),_objectSpread2)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post('/user/login',{email:email,password:password});case 4:res=_context.sent;setUser(_objectSpread(_objectSpread({},user),{},{err:'',success:res.data.msg}));localStorage.setItem('firstLogin',true);dispatch(dispatchLogin());history.push(\"/brows\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setUser(_objectSpread(_objectSpread({},user),{},{err:_context.t0.response.data.msg,success:''}));case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var responseGoogle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('/user/google_login',{tokenId:response.tokenId});case 3:res=_context2.sent;setUser(_objectSpread(_objectSpread({},user),{},{error:'',success:res.data.msg}));localStorage.setItem('firstLogin',true);dispatch(dispatchLogin());history.push(\"/brows\");_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);_context2.t0.response.data.msg&&setUser(_objectSpread(_objectSpread({},user),{},{err:_context2.t0.response.data.msg,success:''}));case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function responseGoogle(_x2){return _ref2.apply(this,arguments);};}();var responseFacebook=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response){var accessToken,userID,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;accessToken=response.accessToken,userID=response.userID;_context3.next=4;return axios.post('/user/facebook_login',{accessToken:accessToken,userID:userID});case 4:res=_context3.sent;setUser(_objectSpread(_objectSpread({},user),{},{error:'',success:res.data.msg}));localStorage.setItem('firstLogin',true);dispatch(dispatchLogin());history.push(\"/brows\");_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);_context3.t0.response.data.msg&&setUser(_objectSpread(_objectSpread({},user),{},{err:_context3.t0.response.data.msg,success:''}));case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function responseFacebook(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{class:\"body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login_page\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),err&&showErrMsg(err),success&&showSuccessMsg(success),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email Address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter email address\",id:\"email\",value:email,name:\"email\",onChange:handleChangeInput})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Enter password\",id:\"password\",value:password,name:\"password\",onChange:handleChangeInput})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"button\",{class:\" bg-primary\",type:\"submit\"},\"Login\"),/*#__PURE__*/React.createElement(Link,{to:\"/forgot_password\"},\"Forgot your password?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"hr\"},\"Or Login With\"),/*#__PURE__*/React.createElement(\"div\",{className:\"social\"},/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"318313263478-09emjnr69e10gjmruc6ladcp14v2fn01.apps.googleusercontent.com\",buttonText:\"Login with google\",onSuccess:responseGoogle,cookiePolicy:'single_host_origin'}),/*#__PURE__*/React.createElement(FacebookLogin,{appId:\"390041882545610\",autoLoad:false,fields:\"name,email,picture\",callback:responseFacebook})),/*#__PURE__*/React.createElement(\"p\",null,\"New Customer? \",/*#__PURE__*/React.createElement(Link,{to:\"/register\",class:\"text-light\"},\"Register\"))));}export default Login;","map":{"version":3,"sources":["D:/gitzip/ReactwebHashcampus/client/src/components/body/auth/Login.js"],"names":["React","useState","Link","useHistory","axios","showErrMsg","showSuccessMsg","dispatchLogin","useDispatch","GoogleLogin","FacebookLogin","initialState","email","password","err","success","Login","user","setUser","dispatch","history","handleChangeInput","e","target","name","value","handleSubmit","preventDefault","post","res","data","msg","localStorage","setItem","push","response","responseGoogle","tokenId","error","responseFacebook","accessToken","userID"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport {showErrMsg, showSuccessMsg} from '../../utils/notification/Notification'\nimport {dispatchLogin} from '../../../redux/actions/authAction'\nimport {useDispatch} from 'react-redux'\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport './Login.css'\n\nconst initialState = {\n    email: '',\n    password: '',\n    err: '',\n    success: ''\n}\n\nfunction Login() {\n    const [user, setUser] = useState(initialState)\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    const {email, password, err, success} = user\n\n    const handleChangeInput = e => {\n        const {name, value} = e.target\n        setUser({...user, [name]:value, err: '', success: ''})\n    }\n\n\n    const handleSubmit = async e => {\n        e.preventDefault()\n        try {\n            const res = await axios.post('/user/login', {email, password})\n            setUser({...user, err: '', success: res.data.msg})\n\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push(\"/brows\")\n\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    const responseGoogle = async (response) => {\n        try {\n            const res = await axios.post('/user/google_login', {tokenId: response.tokenId})\n\n            setUser({...user, error:'', success: res.data.msg})\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push(\"/brows\")\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    const responseFacebook = async (response) => {\n        try {\n            const {accessToken, userID} = response\n            const res = await axios.post('/user/facebook_login', {accessToken, userID})\n\n            setUser({...user, error:'', success: res.data.msg})\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push(\"/brows\")\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    return (\n        <div class=\"body\">\n        <div className=\"login_page\">\n            <h2>Login</h2>\n            {err && showErrMsg(err)}\n            {success && showSuccessMsg(success)}\n\n            <form onSubmit={handleSubmit}>\n                <div>\n                    <label htmlFor=\"email\">Email Address</label>\n                    <input type=\"text\" placeholder=\"Enter email address\" id=\"email\"\n                    value={email} name=\"email\" onChange={handleChangeInput} />\n                </div>\n\n                <div>\n                    <label htmlFor=\"password\">Password</label>\n                    <input type=\"password\" placeholder=\"Enter password\" id=\"password\"\n                    value={password} name=\"password\" onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"row\">\n                    <button class=\" bg-primary\" type=\"submit\">Login</button>\n                    <Link to=\"/forgot_password\">Forgot your password?</Link>\n                </div>\n            </form>\n\n            <div className=\"hr\">Or Login With</div>\n\n            <div className=\"social\">\n                <GoogleLogin\n                    clientId=\"318313263478-09emjnr69e10gjmruc6ladcp14v2fn01.apps.googleusercontent.com\"\n                    buttonText=\"Login with google\"\n                    onSuccess={responseGoogle}\n                    cookiePolicy={'single_host_origin'}\n                />\n                \n                <FacebookLogin\n                appId=\"390041882545610\"\n                autoLoad={false}\n                fields=\"name,email,picture\"\n                callback={responseFacebook} \n                />\n\n            </div>\n\n            <p>New Customer? <Link to=\"/register\" class=\"text-light\">Register</Link></p>\n        </div>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}